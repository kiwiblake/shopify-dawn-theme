{% comment %}
  Pharmaco Women's Health Header
  Features: Purple branding bar, sticky navigation, logo swap on scroll, mobile menu
{% endcomment %}

<header
  data-pharmaco-header
  class="fixed top-0 left-0 right-0 z-50 transition-all duration-300"
  x-data="{ scrolled: false, mobileMenuOpen: false }"
  @scroll.window="scrolled = (window.pageYOffset > 20)"
>
  <!-- Pharmaco branding bar -->
  <div class="bg-gradient-purple text-white py-2">
    <div class="container mx-auto px-4 flex items-center justify-between">
      <span class="text-xs font-medium tracking-wide opacity-90">
        {{ section.settings.branding_text }}
      </span>
      {% if section.settings.hcp_login_text and section.settings.hcp_login_link %}
        <a
          href="{{ section.settings.hcp_login_link }}"
          class="text-xs font-medium hover:underline opacity-90 hover:opacity-100 transition-opacity"
        >
          {{ section.settings.hcp_login_text }}
        </a>
      {% endif %}
    </div>
  </div>

  <!-- Main navigation -->
  <div
    class="transition-all duration-300"
    :class="scrolled ? 'bg-white/95 backdrop-blur-md shadow-soft' : 'bg-transparent'"
  >
    <div class="container mx-auto px-4">
      <nav class="flex items-center justify-between h-16 md:h-20">
        <!-- Logo -->
        <a href="{{ routes.root_url }}" class="flex items-center gap-3 group">
          {% if section.settings.logo_white and section.settings.logo_color %}
            <img
              :src="scrolled ? '{{ section.settings.logo_color | image_url: width: 200 }}' : '{{ section.settings.logo_white | image_url: width: 200 }}'"
              alt="{{ shop.name }}"
              class="h-10 md:h-12 w-auto object-contain transition-all duration-300"
              loading="eager"
            >
          {% elsif section.settings.logo_color %}
            <img
              src="{{ section.settings.logo_color | image_url: width: 200 }}"
              alt="{{ shop.name }}"
              class="h-10 md:h-12 w-auto object-contain"
              loading="eager"
            >
          {% else %}
            <span class="font-display text-xl md:text-2xl font-bold uppercase" :class="scrolled ? 'text-purple' : 'text-white'">
              {{ shop.name }}
            </span>
          {% endif %}
        </a>

        <!-- Desktop Navigation -->
        <div class="hidden lg:flex items-center gap-1">
          {% for link in section.settings.menu.links %}
            <a
              href="{{ link.url }}"
              class="px-4 py-2 rounded-lg transition-all duration-200 font-display uppercase text-sm tracking-wide"
              :class="scrolled ? 'text-gray-700 hover:text-purple hover:bg-purple-light' : 'text-white hover:text-teal hover:bg-white/10'"
            >
              {{ link.title }}
            </a>
          {% endfor %}
        </div>

        <!-- CTA Button -->
        <div class="hidden md:flex items-center gap-4">
          {% if section.settings.cta_text and section.settings.cta_link %}
            <a
              href="{{ section.settings.cta_link }}"
              class="btn-secondary px-6 py-2 rounded-lg text-sm transition-all duration-300"
            >
              {{ section.settings.cta_text }}
            </a>
          {% endif %}
        </div>

        <!-- Mobile Menu Button -->
        <button
          data-mobile-menu-toggle
          @click="mobileMenuOpen = !mobileMenuOpen"
          class="lg:hidden p-2 transition-colors"
          :class="scrolled ? 'text-gray-700' : 'text-white'"
          aria-label="Toggle menu"
        >
          <svg x-show="!mobileMenuOpen" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
          </svg>
          <svg x-show="mobileMenuOpen" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </nav>
    </div>
  </div>

  <!-- Mobile Menu -->
  <div
    data-mobile-menu
    x-show="mobileMenuOpen"
    x-transition:enter="transition ease-out duration-200"
    x-transition:enter-start="opacity-0 transform scale-95"
    x-transition:enter-end="opacity-100 transform scale-100"
    x-transition:leave="transition ease-in duration-150"
    x-transition:leave-start="opacity-100 transform scale-100"
    x-transition:leave-end="opacity-0 transform scale-95"
    class="lg:hidden bg-white/98 backdrop-blur-md border-t border-gray-200 animate-fade-in"
    style="display: none;"
  >
    <div class="container mx-auto px-4 py-4 space-y-2">
      {% for link in section.settings.menu.links %}
        <a
          href="{{ link.url }}"
          class="block py-3 px-4 rounded-lg transition-colors font-display uppercase tracking-wide text-gray-700 hover:bg-purple-light hover:text-purple"
          @click="mobileMenuOpen = false"
        >
          {{ link.title }}
        </a>
      {% endfor %}

      {% if section.settings.cta_text and section.settings.cta_link %}
        <a
          href="{{ section.settings.cta_link }}"
          class="block w-full btn-secondary text-center px-6 py-3 rounded-lg mt-4"
          @click="mobileMenuOpen = false"
        >
          {{ section.settings.cta_text }}
        </a>
      {% endif %}
    </div>
  </div>
</header>

<!-- Spacer to prevent content from hiding under fixed header -->
<div class="h-28 md:h-32"></div>

<script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>

{% schema %}
{
  "name": "Pharmaco Header",
  "settings": [
    {
      "type": "header",
      "content": "Branding Bar"
    },
    {
      "type": "text",
      "id": "branding_text",
      "label": "Branding Text",
      "default": "A Pharmaco Pharmaceuticals Patient Information Website"
    },
    {
      "type": "text",
      "id": "hcp_login_text",
      "label": "HCP Login Text",
      "default": "Healthcare Professional Login"
    },
    {
      "type": "url",
      "id": "hcp_login_link",
      "label": "HCP Login Link"
    },
    {
      "type": "header",
      "content": "Logo"
    },
    {
      "type": "image_picker",
      "id": "logo_white",
      "label": "Logo (White version for transparent background)"
    },
    {
      "type": "image_picker",
      "id": "logo_color",
      "label": "Logo (Color version for white background)"
    },
    {
      "type": "header",
      "content": "Navigation"
    },
    {
      "type": "link_list",
      "id": "menu",
      "label": "Menu",
      "default": "main-menu"
    },
    {
      "type": "header",
      "content": "Call to Action"
    },
    {
      "type": "text",
      "id": "cta_text",
      "label": "CTA Button Text",
      "default": "Track Your Symptoms"
    },
    {
      "type": "url",
      "id": "cta_link",
      "label": "CTA Button Link"
    }
  ]
}
{% endschema %}
